function isLocal(){return window.location.href.includes("localhost")}function isRTL(){return"he"==$("html").attr("lang")||"rtl"==$("body").attr("dir")?!0:!1}function keyCodes(t){this.tab=9,this.enter=13,this.esc=27,this.space=32,this.pageup=33,this.pagedown=34,this.end=35,this.home=36,this.left=t?39:37,this.up=38,this.right=t?37:39,this.down=40}function tpanelacc(t,a){this.settings=$.extend({},defaults,a),this.panel_id=t,this.accordianView=this.settings.accordian,this.$panel=$(t),this.accordian=this.settings.multiselectable,this.keys=new keyCodes(this.settings.rightToLeft),this.$panels=this.$panel.find("."+this.settings.panelClass),this.accordianFirstOpen=this.accordianView?this.settings.accordianFirstOpen:!0,this.createLayout(),this.focusablePanel=this.settings.focusablePanel,this.$tabs=this.$panel.find("."+this.settings.tabClass),this.bindHandlers(),this.accordianToggleble=this.settings.accordianToggleble,this._init(),counter++}!function(t,a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){a(t,e)}):"object"==typeof module&&module.exports?module.exports=a(t,require("jquery")):t.jQueryBridget=a(t,t.jQuery)}(window,function(t,a){"use strict";function r(i,r,l){function c(t,a,e){var r,n="$()."+i+'("'+a+'")';return t.each(function(t,c){var o=l.data(c,i);if(!o)return void s(i+" not initialized. Cannot call methods, i.e. "+n);var d=o[a];if(!d||"_"==a.charAt(0))return void s(n+" is not a valid method");var h=d.apply(o,e);r=void 0===r?h:r}),void 0!==r?r:t}function o(t,a){t.each(function(t,e){var s=l.data(e,i);s?(s.option(a),s._init()):(s=new r(e,a),l.data(e,i,s))})}l=l||a||t.jQuery,l&&(r.prototype.option||(r.prototype.option=function(t){l.isPlainObject(t)&&(this.options=l.extend(!0,this.options,t))}),l.fn[i]=function(t){if("string"==typeof t){var a=e.call(arguments,1);return c(this,t,a)}return o(this,t),this},n(l))}function n(t){!t||t&&t.bridget||(t.bridget=r)}var e=Array.prototype.slice,i=t.console,s="undefined"==typeof i?function(){}:function(t){i.error(t)};return n(a||t.jQuery),r});var defaults={accordian:!1,multiselectable:!0,tabClass:"tab",panelClass:"panel",accordianIcon:!0,accordianImgIcon:{expanded:"expanded.gif",collapsed:"contracted.gif"},accordianImgAlt:{collapsed:"collapsed",expanded:"expanded"},accordianToggleElm:"h3",accordianFirstOpen:!0,accordianIconToEnd:!1,focusablePanel:!0,rightToLeft:!1,accordianToggleble:!1},counter=0;tpanelacc.prototype.createLayout=function(){this.accordianView?this.accordianLayout():this.tpanelaccLayout()},tpanelacc.prototype.tpanelaccLayout=function(){var t=[],a=this.settings,e=this.accordianFirstOpen;this.$panels.each(function(a,i){$(i).attr({role:"tabpanel",id:"tp"+counter+"-panel"+a,"aria-labelledby":"tp"+counter+"-tab"+a}).css("display",e&&0==a?"block":"none"),t[a]=$(i).data("tab-toggle")});var i;if(0==this.$panel.find(".tablist").length){this.$panel.prepend('<ul class="tablist" role="tablist"></ul>'),i=this.$panel.find(".tablist");for(var s=0;s<this.$panels.length;s++)i.append('<li id="tp'+counter+"-tab"+s+'" class="'+a.tabClass+'" aria-controls="tp'+counter+"-panel"+s+'" aria-selected="'+(0==s?"true":"false")+'" role="tab" tabindex="'+(0==s?"0":"-1")+'">'+t[s]+"</li>")}else i=this.$panel.find(".tablist"),i.attr("role","tablist"),i.find("li").each(function(t,e){$(e).attr({role:"tab",id:"tp"+counter+"-tab"+t,"aria-controls":"tp"+counter+"-panel"+t,"aria-selected":0==t?"true":"false",tabindex:0==t?"0":"-1"}).addClass(a.tabClass)})},tpanelacc.prototype.accordianLayout=function(){var t=this.settings,a=!0,e=this.accordianFirstOpen,i=this.$panel;i.has("."+t.tabClass).length&&(a=!1),this.$panels.each(function(s,r){$(r).attr({role:"tabpanel",id:"tp"+counter+"-panel"+s,"aria-labelledby":"tp"+counter+"-tab"+s,"aria-hidden":e&&0==s?"false":"true"}).css("display",e&&0==s?"block":"none").addClass("accordian");var n='<i class="acc-toggle"></i>';t.accordianIcon&&(n='<i class="acc-toggle"><img class="toggle-img" src="'+(e&&0==s?t.accordianImgIcon.expanded:t.accordianImgIcon.collapsed)+'" alt="'+(e&&0==s?t.accordianImgAlt.expanded:t.accordianImgAlt.collapsed)+'" /></i>'),a?($(r).before("<"+t.accordianToggleElm+' id="tp'+counter+"-tab"+s+'" class="accordian '+t.tabClass+'" aria-controls="tp'+counter+"-panel"+s+'" aria-selected="'+(e&&0==s?"true":"false")+'"  aria-expanded="'+(e&&0==s?"true":"false")+'" role="tab" tabindex="'+(0==s?"0":"-1")+'">'+$(r).data("tab-toggle")+"</"+t.accordianToggleElm+">"),t.accordianIconToEnd?i.find("#tp"+counter+"-tab"+s).append(n):i.find("#tp"+counter+"-tab"+s).prepend(n)):($(r).prev("."+t.tabClass).addClass("accordian").attr({id:"tp"+counter+"-tab"+s,"aria-controls":"tp"+counter+"-panel"+s,"aria-selected":e&&0==s?"true":"false","aria-expanded":e&&0==s?"true":"false",role:"tab",tabindex:0==s?"0":"-1"}),t.accordianIconToEnd?i.find("#tp"+counter+"-tab"+s).append(n):i.find("#tp"+counter+"-tab"+s).prepend(n))}),i.addClass("tablist").attr({role:"tablist",multiselectable:t.multiselectable})},tpanelacc.prototype._init=tpanelacc.prototype.init=function(){var t;this.$panels.attr("aria-hidden","true"),t=this.$tabs.filter('[aria-selected="true"]'),void 0==t&&(t=this.$tabs.first()),this.$panel.find("#"+t.attr("aria-controls")).attr(this.focusablePanel?{"aria-hidden":"false",tabindex:"0"}:{"aria-hidden":"false"})},tpanelacc.prototype.switchTabs=function(t,a){isLocal()&&console.log("switchTabs"),t.removeClass("focus"),t.attr("tabindex","-1").attr("aria-selected","false"),a.attr("aria-selected","true"),this.accordianView&&0!=this.accordian||(this.focusablePanel?this.$panel.find("#"+t.attr("aria-controls")).attr({"aria-hidden":"true",tabindex:"-1"}).trigger("data-attribute-changed"):this.$panel.find("#"+t.attr("aria-controls")).attr({"aria-hidden":"true"}).trigger("data-attribute-changed"),this.accordianView?this.$panel.find("#"+t.attr("aria-controls")).slideUp():this.$panel.find("#"+t.attr("aria-controls")).hide(),t.attr("aria-expanded","false"),this.focusablePanel?this.$panel.find("#"+a.attr("aria-controls")).attr({"aria-hidden":"false",tabindex:"0"}).triggerAll("data-attribute-changed data-visible-true"):this.$panel.find("#"+a.attr("aria-controls")).attr({"aria-hidden":"false"}).triggerAll("data-attribute-changed data-visible-true"),this.accordianView?this.$panel.find("#"+a.attr("aria-controls")).slideDown():this.$panel.find("#"+a.attr("aria-controls")).show(),a.attr("aria-expanded","true"),1==this.accordianView&&(this.$tabs.find("img").attr("src",this.settings.accordianImgIcon.collapsed).attr("alt",this.settings.accordianImgAlt.collapsed),a.find("img").attr("src",this.settings.accordianImgIcon.expanded).attr("alt",this.settings.accordianImgAlt.expanded))),a.attr("tabindex","0"),a.focus()},tpanelacc.prototype.togglePanel=function(t){isLocal()&&console.log("togglePanel"),$panel=this.$panel.find("#"+t.attr("aria-controls")),1==this.accordian&&1==this.accordianView?"true"==$panel.attr("aria-hidden")?(this.focusablePanel?$panel.attr({"aria-hidden":"false",tabindex:"0"}).slideDown().triggerAll("data-attribute-changed data-visible-true"):$panel.attr({"aria-hidden":"false"}).slideDown().triggerAll("data-attribute-changed data-visible-true"),t.find(".toggle-img").attr("src",this.settings.accordianImgIcon.expanded).attr("alt",this.settings.accordianImgAlt.expanded),t.attr("aria-expanded","true")):(this.focusablePanel?$panel.attr({"aria-hidden":"true",tabindex:"-1"}).slideUp().trigger("data-attribute-changed"):$panel.attr({"aria-hidden":"true"}).slideUp().trigger("data-attribute-changed"),$panel.slideUp(100),t.find(".toggle-img").attr("src",this.settings.accordianImgIcon.collapsed).attr("alt",this.settings.accordianImgAlt.collapsed),t.attr("aria-expanded","false")):1==this.accordianToggleble&&"true"==t.attr("aria-expanded")?(this.focusablePanel?this.$panels.attr({"aria-hidden":"true",tabindex:"-1"}).trigger("data-attribute-changed"):this.$panels.attr({"aria-hidden":"true"}).trigger("data-attribute-changed"),this.accordianView?this.$panels.slideUp():this.$panels.hide(),this.$tabs.attr("tabindex","-1").attr({"aria-selected":"false","aria-expanded":"false"}),this.$tabs.find(".toggle-img").attr("src",this.settings.accordianImgIcon.collapsed).attr("alt",this.settings.accordianImgAlt.collapsed),t.attr("tabindex","0"),t.attr({"aria-selected":"true"})):(this.focusablePanel?this.$panels.attr({"aria-hidden":"true",tabindex:"-1"}).trigger("data-attribute-changed"):this.$panels.attr({"aria-hidden":"true"}).trigger("data-attribute-changed"),this.accordianView?this.$panels.not($panel).slideUp():this.$panels.not($panel).hide(),this.$tabs.attr("tabindex","-1").attr({"aria-selected":"false","aria-expanded":"false"}),t.attr({"aria-selected":"true","aria-expanded":"true"}),1==this.accordianView&&(this.$tabs.find(".toggle-img").attr("src",this.settings.accordianImgIcon.collapsed).attr("alt",this.settings.accordianImgAlt.collapsed),t.find(".toggle-img").attr("src",this.settings.accordianImgIcon.expanded).attr("alt",this.settings.accordianImgAlt.expanded)),this.focusablePanel?$panel.attr({"aria-hidden":"false",tabindex:"0"}).triggerAll("data-attribute-changed data-visible-true"):$panel.attr({"aria-hidden":"false"}).triggerAll("data-attribute-changed data-visible-true"),this.accordianView?$panel.slideDown():$panel.show(),t.attr("tabindex","0"),t.focus())},tpanelacc.prototype.bindHandlers=function(){var t=this;this.$tabs.keydown(function(a){return t.handleTabKeyDown($(this),a)}),this.$tabs.keypress(function(a){return t.handleTabKeyPress($(this),a)}),this.$tabs.click(function(a){return t.handleTabClick($(this),a)}),this.$tabs.focus(function(a){return t.handleTabFocus($(this),a)}),this.$tabs.blur(function(a){return t.handleTabBlur($(this),a)}),this.$panels.keydown(function(a){return t.handlePanelKeyDown($(this),a)}),this.$panels.keypress(function(a){return t.handlePanelKeyPress($(this),a)}),this.$panels.click(function(a){return t.handlePanelClick($(this),a)})},tpanelacc.prototype.handleTabKeyDown=function(t,a){if(a.altKey)return!0;switch(a.keyCode){case this.keys.enter:case this.keys.space:return 1==this.accordian||this.accordianView&&this.accordianToggleble?(this.togglePanel(t),a.stopPropagation(),!1):!0;case this.keys.left:case this.keys.up:var s;if(a.ctrlKey);else{var r=this.$tabs.index(t);s=0==r?this.$tabs.last():this.$tabs.eq(r-1),this.switchTabs(t,s)}return a.stopPropagation(),!1;case this.keys.right:case this.keys.down:var s,r=this.$tabs.index(t);return s=r==this.$tabs.length-1?this.$tabs.first():this.$tabs.eq(r+1),this.switchTabs(t,s),a.stopPropagation(),!1;case this.keys.home:return this.switchTabs(t,this.$tabs.first()),a.stopPropagation(),!1;case this.keys.end:return this.switchTabs(t,this.$tabs.last()),a.stopPropagation(),!1}},tpanelacc.prototype.handleTabKeyPress=function(t,a){if(a.altKey)return!0;switch(a.keyCode){case this.keys.enter:case this.keys.space:case this.keys.left:case this.keys.up:case this.keys.right:case this.keys.down:case this.keys.home:case this.keys.end:return a.stopPropagation(),!1;case this.keys.pageup:case this.keys.pagedown:return a.ctrlKey?(a.stopPropagation(),!1):!0}return!0},tpanelacc.prototype.handleTabClick=function(t,a){return t.attr("tabindex","0").attr("aria-selected","true"),this.$tabs.not(t).attr("tabindex","-1").attr("aria-selected","false"),this.togglePanel(t),a.stopPropagation(),!1},tpanelacc.prototype.handleTabFocus=function(t){return t.addClass("focus"),!0},tpanelacc.prototype.handleTabBlur=function(t){return t.removeClass("focus"),!0},tpanelacc.prototype.handlePanelKeyDown=function(t,a){if(a.altKey)return!0;switch(a.keyCode){case this.keys.tab:var e=t.find(":focusable"),i=e.index($(a.target)),s=this.$panels.index(t),r=this.$panels.length;if(a.shiftKey){if(0==i&&s>0)for(var n=s-1;n>=0;n--){var l=this.$panels.eq(n),c=$("#"+l.attr("aria-labelledby"));if(e.length=0,e=l.find(":focusable"),e.length>0)return e.last().focus(),this.$tabs.attr("aria-selected","false"),c.attr("aria-selected","true"),a.stopPropagation,!1}}else if(r>s&&i==e.length-1)for(var n=s+1;r>n;n++){var o=this.$panels.eq(n),d=$("#"+o.attr("aria-labelledby"));if(e.length=0,e=o.find(":focusable"),e.length>0)return e.first().focus(),this.$tabs.attr("aria-selected","false"),d.attr("aria-selected","true"),a.stopPropagation,!1}break;case this.keys.left:case this.keys.up:if(!a.ctrlKey)return!0;var h=$("#"+t.attr("aria-labelledby"));return h.focus(),a.stopPropagation(),!1;case this.keys.pageup:var u;if(!a.ctrlKey)return!0;var h=this.$tabs.filter('[aria-selected="true"]'),i=this.$tabs.index(h);return u=0==i?this.$tabs.last():this.$tabs.eq(i-1),this.switchTabs(h,u),a.stopPropagation(),a.preventDefault(),!1;case this.keys.pagedown:var u;if(!a.ctrlKey)return!0;var h=$("#"+t.attr("aria-labelledby")),i=this.$tabs.index(h);return u=i==this.$tabs.length-1?this.$tabs.first():this.$tabs.eq(i+1),this.switchTabs(h,u),a.stopPropagation(),a.preventDefault(),!1}return!0},tpanelacc.prototype.handlePanelKeyPress=function(t,a){if(a.altKey)return!0;if(a.ctrlKey&&(a.keyCode==this.keys.pageup||a.keyCode==this.keys.pagedown))return a.stopPropagation(),a.preventDefault(),!1;switch(a.keyCode){case this.keys.esc:return a.stopPropagation(),a.preventDefault(),!1}return!0},tpanelacc.prototype.handlePanelClick=function(t){var e=$("#"+t.attr("aria-labelledby"));return e.attr("tabindex","0").attr("aria-selected","true"),this.$tabs.not(e).attr("tabindex","-1").attr("aria-selected","false"),!0},$.extend($.expr[":"],{focusable:function(t){var a=t.nodeName.toLowerCase(),e=$(t).attr("tabindex");return 1==$(t)["area"==a?"parents":"closest"](":hidden").length?!1:!isNaN(e)&&e>-1&&e.length>0?!0:1==/input|select|textarea|button|object/.test(a)?!t.disabled:1==("a"==a||"area"==a)?!isNaN(e)&&e>-1&&e.length>0?!1:t.href.length>0:!1}}),$.fn.extend({triggerAll:function(t,a){var i,e=this,s=t.split(" ");for(i=0;i<s.length;i+=1)e.trigger(s[i],a);return e}}),jQuery&&jQuery.bridget&&jQuery.bridget("tpanelacc",tpanelacc);
